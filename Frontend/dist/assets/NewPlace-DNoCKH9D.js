import{r as x,A as f,u as I,j as e,a as E}from"./index-DXYuZLDw.js";import{u as j,I as s,V as n,a as A}from"./form-hook-BonbRPbk.js";/* empty css                  */import{E as g,B as h}from"./axios-CcOVbyc0.js";import{u as y}from"./http-hook-kkJc3NUT.js";import{I as D}from"./ImageUpload-9ARSYr1Z.js";const S=()=>{const i=x.useContext(f),{isLoading:o,error:l,sendRequest:p,clearError:d}=y(),[t,r]=j({title:{value:"",isValid:!1},description:{value:"",isValid:!1},address:{value:"",isValid:!1},image:{value:"",isValid:!1}},!1),u=I(),m=async c=>{c.preventDefault();const a=new FormData;a.append("title",t.inputs.title.value),a.append("description",t.inputs.description.value),a.append("address",t.inputs.address.value),a.append("image",t.inputs.image.value),a.append("creator",i.userId);try{const v=await p("https://travel-diary-app-production.up.railway.app/api/places/","POST",a,{Authorization:"Bearer "+i.token});u("/")}catch{}};return e.jsxs(e.Fragment,{children:[e.jsx(g,{error:l,onClear:d}),e.jsxs("form",{className:"place-form ",onSubmit:m,children:[o&&e.jsx(E,{asOverlay:!0}),e.jsx(s,{id:"title",element:"input",type:"text",label:"Title",error:"Enter a valid title",validators:[n()],onInput:r}),e.jsx(s,{id:"description",element:"textarea",type:"textarea",label:"Description",error:"Enter a valid description (at least 5 characters)",validators:[A(5)],onInput:r}),e.jsx(s,{id:"address",element:"input",type:"input",label:"Address",error:"Enter a valid Address",validators:[n()],onInput:r}),e.jsx(D,{id:"image",onInput:r}),e.jsx(h,{type:"submit",disabled:!t.isValid,children:"ADD PLACE"})]})]})};export{S as default};
