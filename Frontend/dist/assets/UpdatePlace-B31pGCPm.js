import{r as n,d as y,A as E,u as I,j as e,a as P}from"./index-YiMPsi3T.js";/* empty css                  */import{u as A,I as u,V,a as C}from"./form-hook-BBioMSkS.js";import{E as T,B as b}from"./axios-w1fEBo3C.js";import{C as L}from"./Card-BXTVTlDY.js";import{u as g}from"./http-hook-DCuqggwR.js";const F=()=>{const{isLoading:s,error:m,sendRequest:i,clearError:v}=g(),[o,x]=n.useState(null),r=y().placeId,l=n.useContext(E),[t,c,p]=A({title:{value:"",isValid:!1},description:{value:"",isValid:!1}},!1),f=I();n.useEffect(()=>{(async()=>{try{const a=await i(`https://travel-diary-app-production.up.railway.app/api/places/${r}`);x(a.place),p({title:{value:a.place.title,isValid:!0},description:{value:a.place.description,isValid:!0}},!0)}catch{}})()},[i,r,p]);const h=async d=>{d.preventDefault();try{const a={title:t.inputs.title.value,description:t.inputs.description.value},D=await i(`https://travel-diary-app-production.up.railway.app/api/places/${r}`,"PATCH",a,{Authorization:"Bearer "+l.token}),j=l.userId;f(`/${j}/places`)}catch{}console.log("Form data submitted:",t.inputs,l.token)};return e.jsxs(e.Fragment,{children:[e.jsx(T,{error:m,onClear:v}),s&&e.jsx("div",{className:"center",children:e.jsx(P,{asOverlay:!0})}),!s&&o===null&&e.jsx("div",{className:"center",children:e.jsx(L,{children:e.jsx("h2",{children:"Could not find place!"})})}),!s&&o&&e.jsxs("form",{className:"place-form",onSubmit:h,children:[e.jsx(u,{id:"title",element:"input",type:"text",label:"Title",validators:[V()],errorText:"Please enter a valid title.",onInput:c,value:t.inputs.title.value,valid:t.inputs.title.isValid}),e.jsx(u,{id:"description",element:"textarea",label:"Description",validators:[C(5)],errorText:"Please enter a valid description (min. 5 characters).",onInput:c,value:t.inputs.description.value,valid:t.inputs.description.isValid}),e.jsx(b,{type:"submit",disabled:!t.isValid,children:"UPDATE PLACE"})]})]})};export{F as default};
