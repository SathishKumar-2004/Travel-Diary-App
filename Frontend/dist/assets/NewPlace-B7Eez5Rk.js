import{r as x,A as f,u as I,j as e,a as E}from"./index-Be4YmKgC.js";import{u as j,I as r,V as n,a as A}from"./form-hook-CKTJ0Wgx.js";/* empty css                  */import{E as g,B as h}from"./axios-KlaVUNms.js";import{u as y}from"./http-hook-TREtcipU.js";import{I as D}from"./ImageUpload-DeQQh1Li.js";const S=()=>{const i=x.useContext(f),{isLoading:o,error:l,sendRequest:p,clearError:d}=y(),[t,s]=j({title:{value:"",isValid:!1},description:{value:"",isValid:!1},address:{value:"",isValid:!1},image:{value:"",isValid:!1}},!1),u=I(),m=async c=>{c.preventDefault();const a=new FormData;a.append("title",t.inputs.title.value),a.append("description",t.inputs.description.value),a.append("address",t.inputs.address.value),a.append("image",t.inputs.image.value),a.append("creator",i.userId);try{const v=await p("https://loyal-smile-production.up.railway.app/api/places/","POST",a,{Authorization:"Bearer "+i.token});u("/")}catch{}};return e.jsxs(e.Fragment,{children:[e.jsx(g,{error:l,onClear:d}),e.jsxs("form",{className:"place-form ",onSubmit:m,children:[o&&e.jsx(E,{asOverlay:!0}),e.jsx(r,{id:"title",element:"input",type:"text",label:"Title",error:"Enter a valid title",validators:[n()],onInput:s}),e.jsx(r,{id:"description",element:"textarea",type:"textarea",label:"Description",error:"Enter a valid description (at least 5 characters)",validators:[A(5)],onInput:s}),e.jsx(r,{id:"address",element:"input",type:"input",label:"Address",error:"Enter a valid Address",validators:[n()],onInput:s}),e.jsx(D,{id:"image",onInput:s}),e.jsx(h,{type:"submit",disabled:!t.isValid,children:"ADD PLACE"})]})]})};export{S as default};
